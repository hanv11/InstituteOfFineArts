@model InstituteOfFineArts.Models.Competition

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_ExtraLayout.cshtml";
}
<div class="container">
    <main class="site-main">
        <article class="type-page">
            <header class="entry-header">
                <h1 class="entry-title" style="margin-top: 10px; margin-bottom: 10px;">
                    @Html.DisplayFor(model => model.CompetitionName)
                </h1>
            </header>
            <hr />
            <div class="entry-banner">
                <div class="entry-banner">
                    <img class="banner-thumbnail" src="@Url.Content(Model.Image)" />
                </div>

            </div>

            @Html.Action("RegisterPartialView", "Submission", new { competitionId = Model.CompetitionId })

        </article>
        
    </main>
    
</div>
    



@section Scripts {

    <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

    <script type="text/javascript">
        var myWidget = cloudinary.createUploadWidget({
            cloudName: 'hanv11',
            uploadPreset: 'bpmopgln'
        },
            (error, result) => {
                if (!error && result && result.event === "success") {
                    console.log('Done! Here is the image info: ', result.info);
                    var imgLink = result.info.secure_url;
                    document.querySelector("input[name='Picture']").value = imgLink;
                    var imgPrevious = document.getElementById("previous");
                    imgPrevious.src = imgLink;
                    imgPrevious.classList.remove("hidden");
                }
            }
        );

        document.getElementById("upload_widget1").addEventListener("click", function () {
            myWidget.open();
        }, false);
    </script>
    @Scripts.Render("~/bundles/jqueryval")
}
