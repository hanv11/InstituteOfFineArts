@model InstituteOfFineArts.Models.Competition

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
    <h1 class="entry-header">
        @Html.DisplayFor(model => model.CompetitionName)
    </h1>
    <div class="entry-banner">
        <img src="@Url.Content(Model.Image)" />
    </div>
    <hr />
    <div>
        @Html.Action("RegisterPartialView", "Submissions", new { competitionId = Model.CompetitionId })
    </div>



@section Scripts {

    <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

    <script type="text/javascript">
        var myWidget = cloudinary.createUploadWidget({
            cloudName: 'hanv11',
            uploadPreset: 'bpmopgln'
        },
            (error, result) => {
                if (!error && result && result.event === "success") {
                    console.log('Done! Here is the image info: ', result.info);
                    var imgLink = result.info.secure_url;
                    document.querySelector("input[name='Picture']").value = imgLink;
                    var imgPrevious = document.getElementById("previous");
                    imgPrevious.src = imgLink;
                    imgPrevious.classList.remove("hidden");
                }
            }
        );

        document.getElementById("upload_widget1").addEventListener("click", function () {
            myWidget.open();
        }, false);
    </script>
    @Scripts.Render("~/bundles/jqueryval")
}
